# üéâ –û–¢–ß–ï–¢: –ó–ê–í–ï–†–®–ï–ù–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò –ú–ï–¢–†–ò–ö

**–î–∞—Ç–∞:** 04.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–û  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~60 –º–∏–Ω—É—Ç

---

## üìã –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

–í—Å–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞:

- ‚úÖ **Prometheus:** –í—Å–µ 4 targets UP (100%)
- ‚úÖ **Grafana:** Data Source –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–î–∞—à–±–æ—Ä–¥:** Node Exporter Full –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏:** CPU, Memory, Disk, Network —Å–æ–±–∏—Ä–∞—é—Ç—Å—è —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

---

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –î–û–†–ê–ë–û–¢–ö–ò

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Prometheus ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Node Exporter –Ω–∞ Kibana Server –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `localhost:9100` –≤–º–µ—Å—Ç–æ `10.0.1.3:9100`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
/etc/prometheus/prometheus.yml.backup-20251004-142729

# –ò–∑–º–µ–Ω–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- targets: ['localhost:9100']  # –ë—ã–ª–æ
+ targets: ['10.0.1.3:9100']   # –°—Ç–∞–ª–æ

# Prometheus –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
sudo systemctl restart prometheus
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ Node Exporter –Ω–∞ Kibana Server —Ç–µ–ø–µ—Ä—å UP

**–§–∞–π–ª—ã:**
- `fix_prometheus_config.sh` - —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Security Groups ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Web Servers –±—ã–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è Prometheus (timeout –Ω–∞ –ø–æ—Ä—Ç—É 9100)

**–†–µ—à–µ–Ω–∏–µ:**
```hcl
# –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –≤ terraform/security_groups.tf
resource "yandex_vpc_security_group" "web_sg" {
  ingress {
    protocol          = "TCP"
    description       = "Node Exporter from Kibana"
    security_group_id = yandex_vpc_security_group.kibana_sg.id
    port              = 9100
  }
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ:**
```bash
terraform plan -out=tfplan
terraform apply tfplan
# Resources: 0 added, 1 changed, 0 destroyed
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ Web Server 1 (10.0.2.21:9100) - UP  
‚úÖ Web Server 2 (10.0.3.3:9100) - UP

---

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Exporter –Ω–∞ Kibana Server ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Node Exporter –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ Kibana Server

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Node Exporter 1.7.0
wget https://github.com/prometheus/node_exporter/releases/download/v1.7.0/node_exporter-1.7.0.linux-amd64.tar.gz
tar xzf node_exporter-1.7.0.linux-amd64.tar.gz
sudo cp node_exporter /opt/node_exporter/
sudo chmod +x /opt/node_exporter/node_exporter

# –°–æ–∑–¥–∞–Ω–∏–µ systemd service
sudo systemctl enable node_exporter
sudo systemctl start node_exporter
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ Node Exporter –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Kibana Server  
‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ http://10.0.1.3:9100/metrics

**–§–∞–π–ª—ã:**
- `install_node_exporter_kibana.sh` - —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

---

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Grafana Data Source ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Grafana –Ω–µ –º–æ–≥–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Prometheus –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL

**–î–µ—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:**
```
URL: http://localhost:9090
Error: dial tcp [::1]:9090: connect: connection refused
```

**–ü—Ä–∏—á–∏–Ω–∞:**  
Grafana —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (bridge network), –∏ `localhost` –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ - —ç—Ç–æ —Å–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –Ω–µ —Ö–æ—Å—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
```
–ë—ã–ª–æ:  http://localhost:9090
–°—Ç–∞–ª–æ: http://10.0.1.3:9090
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl http://62.84.112.42:3000/api/datasources/1/health
# Status: OK
# Message: Successfully queried the Prometheus API.
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ Grafana —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Prometheus  
‚úÖ Data Source –ø—Ä–æ—Ö–æ–¥–∏—Ç health check

---

### 5. –ò–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–∞ Node Exporter Full ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —Å–æ–∑–¥–∞–ª–∞ –¥–∞—à–±–æ—Ä–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ Data Source –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ (`${ds_prometheus}`)

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ Data Sources (Prometheus-1, Prometheus-2)
2. –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π –¥–∞—à–±–æ—Ä–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ Data Source

**–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥:**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** Node Exporter Full
- **ID –Ω–∞ Grafana.com:** 1860
- **UID:** c3cd5934-e61c-4ef9-8a54-60d0dcd5f779
- **URL:** http://62.84.112.42:3000/d/c3cd5934-e61c-4ef9-8a54-60d0dcd5f779/node-exporter-full
- **–ü–∞–Ω–µ–ª–µ–π:** 31+

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ –î–∞—à–±–æ—Ä–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤  
‚úÖ –í—Å–µ –ø–∞–Ω–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–§–∞–π–ª—ã:**
- `import_grafana_dashboard.ps1` - –ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞
- `import_dashboard_fixed.ps1` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

---

## üìä –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´

### Prometheus Targets

| Target | Job | Instance | Health | Scrape Duration |
|--------|-----|----------|--------|-----------------|
| Prometheus | prometheus | localhost:9090 | ‚úÖ UP | ~4ms |
| Kibana Server | node_exporter | kibana-server | ‚úÖ UP | ~0.5ms |
| Web Server 1 | web_servers | 10.0.2.21:9100 | ‚úÖ UP | ~10ms |
| Web Server 2 | web_servers | 10.0.3.3:9100 | ‚úÖ UP | ~10ms |

**–ò—Ç–æ–≥–æ:** 4 –∏–∑ 4 targets UP (100%) ‚úÖ

---

### –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏

**CPU Usage:**
- Web Server 1: 0.17%
- Web Server 2: 0.13%
- Kibana Server: 0.83%

**Memory Usage:**
- Web Server 1: 16.4%
- Web Server 2: 15.05%
- Kibana Server: 52.41%

**–í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** ‚úÖ

---

### Grafana

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**URL:** http://62.84.112.42:3000  
**–í–µ—Ä—Å–∏—è:** 10.2.2  
**–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** admin / DevOps2025!

**Data Source:**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** Prometheus
- **URL:** http://10.0.1.3:9090
- **Status:** ‚úÖ OK
- **Message:** Successfully queried the Prometheus API

**–î–∞—à–±–æ—Ä–¥—ã:**
- ‚úÖ Node Exporter Full (31+ –ø–∞–Ω–µ–ª–µ–π)

---

## üìö –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### –°–∫—Ä–∏–ø—Ç—ã

1. **fix_prometheus_config.sh** (70 —Å—Ç—Ä–æ–∫)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Prometheus
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

2. **install_node_exporter_kibana.sh** (110 —Å—Ç—Ä–æ–∫)
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ Node Exporter 1.7.0
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ systemd service
   - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

3. **import_grafana_dashboard.ps1** (150 —Å—Ç—Ä–æ–∫)
   - –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞—à–±–æ—Ä–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å Grafana.com

4. **import_dashboard_fixed.ps1** (130 —Å—Ç—Ä–æ–∫)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–º–ø–æ—Ä—Ç–∞
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Data Source
   - –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

5. **check_prometheus_metrics.sh** (280 —Å—Ç—Ä–æ–∫)
   - –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PromQL –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ Node Exporter –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö

6. **open_monitoring.ps1** (200 —Å—Ç—Ä–æ–∫)
   - –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **PROMQL_QUERIES.md** (300+ —Å—Ç—Ä–æ–∫)
   - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ PromQL –∑–∞–ø—Ä–æ—Å–æ–≤
   - 50+ –ø—Ä–∏–º–µ—Ä–æ–≤
   - CPU, Memory, Disk, Network –º–µ—Ç—Ä–∏–∫–∏

2. **GRAFANA_DASHBOARDS_GUIDE.md** (300+ —Å—Ç—Ä–æ–∫)
   - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–∞—à–±–æ—Ä–¥–æ–≤
   - –ò–º–ø–æ—Ä—Ç –≥–æ—Ç–æ–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π

3. **METRICS_VISUALIZATION_REPORT.md** (300+ —Å—Ç—Ä–æ–∫)
   - –ü–µ—Ä–≤–∏—á–Ω—ã–π –æ—Ç—á–µ—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
   - –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –†–µ—à–µ–Ω–∏—è

4. **VISUALIZATION_COMPLETION_REPORT.md** (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
   - –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ –¥–æ—Ä–∞–±–æ—Ç–∫–∞—Ö
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π
   - –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

---

## üéØ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢

### ‚úÖ Prometheus
- –°–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å 4 targets
- –í—Å–µ targets –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ UP
- API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω: http://62.84.112.42:9090

### ‚úÖ Node Exporter
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö:
  - Kibana Server (10.0.1.3:9100)
  - Web Server 1 (10.0.2.21:9100)
  - Web Server 2 (10.0.3.3:9100)
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç 100+ –º–µ—Ç—Ä–∏–∫
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

### ‚úÖ Grafana
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ Prometheus
- Data Source –ø—Ä–æ—Ö–æ–¥–∏—Ç health check
- –î–∞—à–±–æ—Ä–¥ Node Exporter Full –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω: http://62.84.112.42:3000

### ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏
- CPU Usage (–ø–æ —è–¥—Ä–∞–º –∏ –æ–±—â–∏–π)
- Memory Usage (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞)
- Disk I/O (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)
- Network Traffic (–≤—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π)
- System Load, Uptime, Processes
- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ (100+ –º–µ—Ç—Ä–∏–∫)

---

## üí° –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∞—à–±–æ—Ä–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://62.84.112.42:3000
2. –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏: admin / DevOps2025!
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Dashboards**
4. –û—Ç–∫—Ä–æ–π—Ç–µ **Node Exporter Full**

### –í—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞

–í –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –¥–∞—à–±–æ—Ä–¥–∞ –µ—Å—Ç—å –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ **Host**:
- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (web1, web2, kibana)
- –ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ **All** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

–í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É:
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —á–∞—Å–æ–≤
- –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥: Last 5 minutes, Last 1 hour, Last 24 hours
- –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 5s, 10s, 30s, 1m

### –ò–∑—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

–î–∞—à–±–æ—Ä–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏:
1. **Quick CPU / Mem / Disk** - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞
2. **CPU** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ
3. **Memory** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
4. **Disk** - –¥–∏—Å–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
5. **Network** - —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
6. **System** - —Å–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üîç –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```powershell
# –û—Ç–∫—Ä—ã—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
.\open_monitoring.ps1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Prometheus
wsl bash check_prometheus_metrics.sh
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus Targets

```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://62.84.112.42:9090/targets

# –í—Å–µ targets –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–µ–ª–µ–Ω—ã–º–∏ (UP)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Grafana Data Source

```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://62.84.112.42:3000

# –ü–µ—Ä–µ–π—Ç–∏ –≤ Configuration ‚Üí Data Sources ‚Üí Prometheus
# –ù–∞–∂–∞—Ç—å "Save & Test"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Data source is working"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫

```bash
# –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥
http://62.84.112.42:3000/d/c3cd5934-e61c-4ef9-8a54-60d0dcd5f779/node-exporter-full

# –í—ã–±—Ä–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ Host
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≥—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
```

---

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ—Ä–∞–±–æ—Ç–æ–∫:** ~60 –º–∏–Ω—É—Ç

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:** 5
1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus (localhost ‚Üí 10.0.1.3)
2. Security Groups (–¥–æ–±–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç 9100)
3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Node Exporter –Ω–∞ Kibana Server
4. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL Data Source –≤ Grafana
5. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–∞

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** 10
- –°–∫—Ä–∏–ø—Ç—ã: 6
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 4

**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~1500

**Targets UP:** 4 –∏–∑ 4 (100%)

**–ú–µ—Ç—Ä–∏–∫ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è:** 100+

---

## üéì –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Security Groups
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Node Exporter –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω Data Source –≤ Grafana
5. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –¥–∞—à–±–æ—Ä–¥ Node Exporter Full
6. ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üéâ –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!

**Prometheus:**
- ‚úÖ 4 targets UP (100%)
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**Grafana:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ Prometheus
- ‚úÖ –î–∞—à–±–æ—Ä–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ 31+ –ø–∞–Ω–µ–ª–µ–π —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è–º–∏

**Node Exporter:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç 100+ –º–µ—Ç—Ä–∏–∫
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤

- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤
- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

```promql
# High CPU (>90%)
(100 - (avg by (instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)) > 90

# Low Memory (<10%)
(100 * (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) < 10

# Disk Full (>95%)
(100 - ((node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes{mountpoint="/"}) * 100)) > 95
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Alertmanager

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (email, Slack, Telegram)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏

---

## üìû –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

**–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:**
- Prometheus: http://62.84.112.42:9090
- Grafana: http://62.84.112.42:3000
- –î–∞—à–±–æ—Ä–¥: http://62.84.112.42:3000/d/c3cd5934-e61c-4ef9-8a54-60d0dcd5f779/node-exporter-full

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- PROMQL_QUERIES.md - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
- GRAFANA_DASHBOARDS_GUIDE.md - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–∞—à–±–æ—Ä–¥–∞–º
- ACCESS_GUIDE.md - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–æ—Å—Ç—É–ø—É

**–°–∫—Ä–∏–ø—Ç—ã:**
- check_prometheus_metrics.sh - –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
- open_monitoring.ps1 - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 04.10.2025*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –í–°–ï –î–û–†–ê–ë–û–¢–ö–ò –ó–ê–í–ï–†–®–ï–ù–´*  
*–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: 100% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞*

